<div class="container">

	<div class="row hidden-print">
		<div class="col-lg-12">
			<div class="xpage-header">
				<h1 id="forms">Gates</h1>
			</div>
		</div>
	</div>

	<div class="row" data-ng-show="$state.includes('gates')" data-ng-hide="$state.includes('gates.invoices')">

		<div class="col-lg-12">
			<form name="myForm" novalidate>

				<div class="col-lg-4">
					<div class="well">
						<fieldset>
							<legend>Fecha Desde</legend>
							<div class="form-group">
								<label for="fechaDesde">D&iacute;a</label>
								<p class="input-group">
									<input type="text" class="form-control" id="fechaDesde" datepicker-popup="{{formatDate}}" ng-model="fecha.desde" is-open="openFechaDesde" datepicker-options="dateOptions" show-button-bar="false" ng-required="true" />
									<span class="input-group-btn">
										<button class="btn btn-default" ng-click="openDate($event); openFechaDesde = !openFechaDesde"><i class="glyphicon glyphicon-calendar"></i></button>
									</span>
								</p>
							</div>
							<div class="form-group">
								<label>Horario</label>
								<timepicker id="horarioDesde" ng-model="horario.desde" hour-step="1" minute-step="15" show-meridian="false"></timepicker>
							</div>
						</fieldset>
					</div>
				</div>

				<div class="col-lg-4">
					<div class="well">
						<fieldset>
							<legend>Fecha Hasta</legend>
							<div class="form-group">
								<label for="fechaHasta">D&iacute;a</label>
								<p class="input-group">
									<input type="text" class="form-control" id="fechaHasta" datepicker-popup="{{formatDate}}" ng-model="fecha.hasta" is-open="openFechaHasta" datepicker-options="dateOptions" show-button-bar="false" ng-required="true" />
									<span class="input-group-btn">
										<button class="btn btn-default" ng-click="openDate($event); openFechaHasta = !openFechaHasta"><i class="glyphicon glyphicon-calendar"></i></button>
									</span>
								</p>
							</div>
							<div class="form-group">
								<label>Horario</label>
								<timepicker id="horarioHasta" ng-model="horario.hasta" hour-step="1" minute-step="15" show-meridian="false"></timepicker>
							</div>
						</fieldset>
					</div>
				</div>

				<div class="col-lg-4">
					<div class="well">
						<fieldset>
							<legend>Contenedor</legend>
							<div class="form-group">
								<label for="contenedor">Filtrar por nombre</label>
								<input type="text" class="form-control" id="contenedor" ng-model="contenedor" toupper>
							</div>
							<div class="form-group">
								<button class="btn btn-default" ui-sref="control"><span class="glyphicon glyphicon-arrow-left"></span> Volver</button>
								<button class="btn btn-primary" ng-click="cargar()" ng-disabled="myForm.$invalid || fecha.desde > fecha.hasta"><span class="glyphicon glyphicon-asterisk"></span> Cargar</button>
							</div>
						</fieldset>
					</div>
				</div>

			</form>
		</div>

		<div class="col-lg-12">
			<div class="row">
				<table class="table table-bordered table-hover" style="text-align: center">
					<tr>
						<th style="text-align: center">Fecha</th>
						<th style="text-align: center">Buque</th>
						<th style="text-align: center">Viaje</th>
						<th style="text-align: center">Contenedor</th>
						<th style="text-align: center">Patente del cami&oacute;n</th>
						<th style="text-align: center">Tipo</th>
						<th style="text-align: center">Horario</th>
						<th style="text-align: center">Inicio del turno</th>
						<th style="text-align: center">Fin del turno</th>
						<th style="text-align: center">Movimiento</th>
						<th style="text-align: center">Facturas</th>
					</tr>
					<tr ng-repeat="gate in gates">
						<td>{{ gate.gateTimestamp | date: 'dd/MM/yyyy' }}</td>
						<td>{{ gate.buque }}</td>
						<td>{{ gate.viaje }}</td>
						<td>{{ gate.contenedor }}</td>
						<td>{{ gate.patenteCamion }}</td>
						<td>{{ gate.tipo }}</td>
						<td ng-init="colorH = colorHorario(gate)" ng-style="{'color': colorH}">{{ gate.gateTimestamp | date: 'HH:mm' }}</td>
						<td>{{ gate.turnoInicio | date: 'HH:mm' }}</td>
						<td>{{ gate.turnoFin | date: 'HH:mm' }}</td>
						<td>{{ gate.mov }}</td>
						<td><button class="btn btn-primary" ng-click="ver(gate.contenedor)" ui-sref=".invoices"><span class="glyphicon glyphicon-zoom-in"></span> Ver</button></td>
					</tr>
				</table>
				<pagination boundary-links="true" total-items="totalItems" ng-model="currentPage" ng-change="pageChanged()" max-size="5" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>
			</div>
		</div>
	</div>

	<div data-ng-show="$state.includes('gates.invoices')">
		<div ui-view></div>
	</div>

</div>