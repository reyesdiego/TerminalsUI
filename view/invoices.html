<div class="container">

	<div class="hidden-print">
		<div class="row" data-ng-hide="$state.includes('gates.invoices')">
			<br>
			<div class="col-lg-1">
				<img src="images/comprobantes.png" height="110" width="108">
			</div>
			<div class="col-lg-11">
				<div class="row xpage-header">
					<h1 id="forms">Comprobantes - {{ terminal.full_name }}<span ng-show="acceso=='agp'" style="margin-left: 30px">({{ nombre }})</span></h1>
				</div>
			</div>
		</div>

		<div class="row" data-ng-hide="$state.includes('invoices.result') || $state.includes('gates.invoices.result') || $state.includes('gates.invoices')">
			<div class="col-lg-12">
				<div ng-include="'view/invoices.search.html'"></div>
			</div>
		</div>

		<div class="row" data-ng-hide="$state.includes('invoices.result') || $state.includes('gates.invoices.result') || comprobantesVistos.length == 0">
			<div class="col-lg-12">
				<accordion>
					<accordion-group is-open="status.open">
						<accordion-heading>
							<strong>Comprobantes vistos</strong><i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i>
						</accordion-heading>
						<div class="table-responsive">
							<table class="table table-striped table-bordered table-hover">
								<thead>
								<tr>
									<th class="col-lg-1 text-right">Pto. Venta</th>
									<th>Comprobante</th>
									<th class="col-lg-1 text-right">Nro</th>
									<th>Razón Social</th>
									<th class="text-center">Fecha</th>
									<th class="text-right">Importe Total</th>
									<th class="col-lg-1 text-center">Detalles</th>
									<th class="col-lg-1 text-center">Quitar</th>
								</tr>
								</thead>
								<tbody>
								<tr ng-repeat="invoice in comprobantesVistos">
									<td class="text-right">{{ invoice.nroPtoVenta }}</td>
									<td><a ng-click="filtrar.codComprobante(invoice.codTipoComprob)"><span class="glyphicon glyphicon-search"></span></a> {{ vouchersType[invoice.codTipoComprob] }}</td>
									<td class="text-right"><a href ng-click="filtrar.nroComprobante(invoice.nroComprob)"><span class="glyphicon glyphicon-search"></span></a> {{ invoice.nroComprob }}</td>
									<td><a ng-click="filtrar.razonSocial(invoice.razon)"><span class="glyphicon glyphicon-search"></span></a> {{ invoice.razon }}</td>
									<td class="text-center"><a href ng-click="filtrar.fechaDesde(invoice.fecha.emision)"><span class="glyphicon glyphicon-search"></span></a> {{ invoice.fecha.emision | date: 'dd/MM/yyyy' }}</td>
									<td class="text-right">{{ moneda | formatCurrency }} {{ conversionMoneda(invoice.importe.total, invoice.codMoneda, invoice.cotiMoneda) | currency }}</td>
									<td class="text-center"><button ui-sref=".result" class="btn btn-info" ng-click="$parent.verDetalle = invoice"><span class="glyphicon glyphicon-zoom-in"></span></button></td>
									<td class="text-center"><button class="btn btn-info" ng-click="$parent.quitarVista(invoice)"><span class="glyphicon glyphicon-remove"></span></button></td>
								</tr>
								</tbody>
							</table>
						</div>
					</accordion-group>
				</accordion>
			</div>
		</div>

		<div class="row" data-ng-show="$state.includes('gates.invoices')">
			<fieldset>
				<legend>Comprobantes del contenedor {{ model.contenedor }}</legend>
			</fieldset>
		</div>

		<div class="row" data-ng-hide="$state.includes('invoices.result') || $state.includes('gates.invoices.result')">
			<div class="col-lg-12">
				<div class="table-responsive">
					<table class="table table-striped table-bordered table-hover">
						<thead>
						<tr>
							<th style="text-align: right">
								<a href ng-click="filtrarOrden('nroPtoVenta')">
									<span class="glyphicon glyphicon-sort-by-attributes" ng-show="filtroOrden=='nroPtoVenta' && filtroOrdenReverse==false"></span>
									<span class="glyphicon glyphicon-sort-by-attributes-alt" ng-show="filtroOrden=='nroPtoVenta' && filtroOrdenReverse==true"></span>
									 Pto. Venta
								</a>
							</th>
							<th>
								<a href ng-click="filtrarOrden('codTipoComprob')">
									<span class="glyphicon glyphicon-sort-by-attributes" ng-show="filtroOrden=='codTipoComprob' && filtroOrdenReverse==false"></span>
									<span class="glyphicon glyphicon-sort-by-attributes-alt" ng-show="filtroOrden=='codTipoComprob' && filtroOrdenReverse==true"></span>
									 Comprobante
								</a>
							</th>
							<th style="text-align: right" class="col-lg-1">
								<a href ng-click="filtrarOrden('nroComprob')">
									<span class="glyphicon glyphicon-sort-by-attributes" ng-show="filtroOrden=='nroComprob' && filtroOrdenReverse==false"></span>
									<span class="glyphicon glyphicon-sort-by-attributes-alt" ng-show="filtroOrden=='nroComprob' && filtroOrdenReverse==true"></span>
									 Nro
								</a>
							</th>
							<th>
								<a href ng-click="filtrarOrden('razon')">
									<span class="glyphicon glyphicon-sort-by-attributes" ng-show="filtroOrden=='razon' && filtroOrdenReverse==false"></span>
									<span class="glyphicon glyphicon-sort-by-attributes-alt" ng-show="filtroOrden=='razon' && filtroOrdenReverse==true"></span>
									 Razón Social
								</a>
							</th>
							<th style="text-align: center">
								<a href ng-click="filtrarOrden('fecha.emision')">
									<span class="glyphicon glyphicon-sort-by-attributes" ng-show="filtroOrden=='fecha.emision' && filtroOrdenReverse==false"></span>
									<span class="glyphicon glyphicon-sort-by-attributes-alt" ng-show="filtroOrden=='fecha.emision' && filtroOrdenReverse==true"></span>
									 Fecha
								</a>
							</th>
							<th style="text-align: right">
								<a href ng-click="filtrarOrden('importe.total')">
									<span class="glyphicon glyphicon-sort-by-attributes" ng-show="filtroOrden=='importe.total' && filtroOrdenReverse==false"></span>
									<span class="glyphicon glyphicon-sort-by-attributes-alt" ng-show="filtroOrden=='importe.total' && filtroOrdenReverse==true"></span>
									 Importe Total
								</a>
							</th>
							<th class="col-lg-1" style="text-align: center">Detalles</th>
							<th ng-show="acceso=='agp'">Estado</th>
						</tr>
						</thead>
						<tbody>
						<tr ng-repeat="invoice in invoices">
							<td style="text-align: right"><a href ng-click="filtrar.nroPtoVenta(invoice.nroPtoVenta)"><span class="glyphicon glyphicon-search"></span></a> {{ invoice.nroPtoVenta }}</td>
							<td><a href ng-click="filtrar.codComprobante(invoice.codTipoComprob)"><span class="glyphicon glyphicon-search"></span></a> {{ vouchersType[invoice.codTipoComprob] }}</td>
							<td style="text-align: right"><a href ng-click="filtrar.nroComprobante(invoice.nroComprob)"><span class="glyphicon glyphicon-search"></span></a> {{ invoice.nroComprob }}</td>
							<td><a href ng-click="filtrar.razonSocial(invoice.razon)"><span class="glyphicon glyphicon-search"></span></a> {{ invoice.razon }}</td>
							<td style="text-align: center"><a href ng-click="filtrar.fechaDesde(invoice.fecha.emision)"><span class="glyphicon glyphicon-search"></span></a> {{ invoice.fecha.emision | date: 'dd/MM/yyyy' }}</td>
							<td style="text-align: right">{{ moneda | formatCurrency }} {{ conversionMoneda(invoice.importe.total, invoice.codMoneda, invoice.cotiMoneda) | currency }}</td>
							<td style="text-align: center"><button ui-sref=".result" class="btn btn-info" ng-click="$parent.mostrarDetalle(invoice)"><span class="glyphicon glyphicon-zoom-in"></span></button></td>
							<td ng-show="acceso=='agp'">
								<div class="btn-group" dropdown is-open="status.isopen">
									<button type="button" class="btn {{ invoice.estado.btnEstado }} dropdown-toggle">
										{{ invoice.estado.estado }} <span class="caret"></span>
									</button>
									<ul class="dropdown-menu dropdown-toggle" role="menu">
										<li><a href ng-click="revisarComprobante(invoice)">Revisar</a></li>
										<li><a href ng-click="comprobanteOk(invoice)">OK</a></li>
										<li><a href ng-click="comprobanteError(invoice)">Error</a></li>
									</ul>
								</div>
							</td>
						</tr>
						</tbody>
					</table>
				</div>
				<div data-ng-hide="$state.includes('gates.invoices')">
					<div class="text-center hidden-xs"><pagination boundary-links="true" total-items="totalItems" ng-model="currentPage" ng-change="pageChanged()" max-size="20" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div>
					<div class="text-center visible-xs"><pagination boundary-links="true" total-items="totalItems" ng-model="currentPage" ng-change="pageChanged()" max-size="5" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div>
				</div>
				<div data-ng-show="$state.includes('gates.invoices')">
					<button class="btn btn-default" ng-click="$state.go('^')"><span class="glyphicon glyphicon-arrow-left"></span> Volver</button>
				</div>
			</div>
		</div>
	</div>

	<div data-ng-show="$state.includes('invoices.result') || $state.includes('gates.invoices.result')">
		<div class="row">
			<div ui-view></div>
		</div>
	</div>

</div>
