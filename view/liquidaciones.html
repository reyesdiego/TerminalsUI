<div class="container" ng-controller="liquidacionesCtrl">

	<div class="row">
		<div class="col-lg-12">
			<div class="xpage-header">
				<h1><img ng-src="images/Acceso.gif" height="64" width="64" class="hidden-xs"> Liquidaciones</h1>
			</div>
		</div>
	</div>

	<tabset justified="true">

		<tab class="hidden-print" heading="Pre-Liquidar" select="cambiarModo('sinLiquidar')">
			<div class="col-xlg-6 col-lg-12">
				<div>
					<h3>Comprobantes sin liquidar</h3>
				</div>
				<hr>
				<div ng-hide="sinLiquidar.verDetalle">
					<liquidaciones-search model="sinLiquidar.model" ocultar-filtros="sinLiquidar.ocultarFiltros"></liquidaciones-search>
				</div>
				<div class="col-lg-12 text-center" ng-show="sinLiquidar.cargando">
					<img class="media-object center-block" src="images/loading.gif">
				</div>
				<div class="col-lg-12" ng-hide="sinLiquidar.cargando || sinLiquidar.verDetalle">
					<table-sin-liquidar></table-sin-liquidar>
					<div class="col-lg-12 hidden-print" ng-show="sinLiquidar.total > itemsPerPage">
						<div class="text-center visible-xs"><pagination boundary-links="true" total-items="sinLiquidar.total" items-per-page="itemsPerPage" ng-model="sinLiquidar.currentPage" max-size="5" ng-click="cargarSinLiquidar()" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div>
						<div class="text-center visible-sm"><pagination boundary-links="true" total-items="sinLiquidar.total" items-per-page="itemsPerPage" ng-model="sinLiquidar.currentPage" max-size="7" ng-click="cargarSinLiquidar()" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div>
						<div class="text-center visible-md"><pagination boundary-links="true" total-items="sinLiquidar.total" items-per-page="itemsPerPage" ng-model="sinLiquidar.currentPage" max-size="11" ng-click="cargarSinLiquidar()" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div>
						<div class="text-center visible-lg"><pagination boundary-links="true" total-items="sinLiquidar.total" items-per-page="itemsPerPage" ng-model="sinLiquidar.currentPage" max-size="15" ng-click="cargarSinLiquidar()" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div>
					</div>
					<br>
				</div>
				<div class="col-lg-12" ng-show="sinLiquidar.verDetalle">
					<invoices-result></invoices-result>
				</div>
				<div class="row">
					<div class="col-lg-6 text-left">
						<button class="btn btn-primary" ng-click="anexarComprobantes()" ng-disabled="!preLiquidacionSelected">Anexar a pre-liquidación {{ liquidacionSelected.preNumber }}</button>
					</div>
				</div>
			</div>

			<div class="col-xlg-6 col-lg-12">
				<div>
					<h3>Pre-Liquidaciones</h3>
				</div>
				<hr>
				<liquidaciones-search model="preLiquidacion.model" ocultar-filtros="preLiquidacion.ocultarFiltros"></liquidaciones-search>
				<table-pagos cargando="preLiquidacion.cargando" datos-pagos="preLiquidacion.datos" panel-mensaje="preLiquidacion.panelMensaje" detalle="cargarDetallePreLiquidacion(pago)" final="false"></table-pagos>
				<!--<div-pagination total-items="totalLiquidaciones" items-per-page="itemsPerPage" current-page="currentPageLiquidaciones"></div-pagination>-->
				<div class="col-lg-12 hidden-print" ng-show="preLiquidacion.total > itemsPerPage">
					<div class="text-center visible-xs"><pagination boundary-links="true" total-items="preLiquidacion.total" items-per-page="itemsPerPage" ng-model="preLiquidacion.currentPage" max-size="5" ng-click="cargarPreLiquidaciones()" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div>
					<div class="text-center visible-sm"><pagination boundary-links="true" total-items="preLiquidacion.total" items-per-page="itemsPerPage" ng-model="preLiquidacion.currentPage" max-size="7" ng-click="cargarPreLiquidaciones()" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div>
					<div class="text-center visible-md"><pagination boundary-links="true" total-items="preLiquidacion.total" items-per-page="itemsPerPage" ng-model="preLiquidacion.currentPage" max-size="11" ng-click="cargarPreLiquidaciones()" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div>
					<div class="text-center visible-lg"><pagination boundary-links="true" total-items="preLiquidacion.total" items-per-page="itemsPerPage" ng-model="preLiquidacion.currentPage" max-size="15" ng-click="cargarPreLiquidaciones()" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div>
				</div>
				<div class="row">
					<div class="col-lg-4">
						<h5  ng-show="preLiquidacion.verDetalle">Toneladas: {{ preLiquidacion.detalle.tons | number: 2 }}</h5>
					</div>
					<div class="col-lg-4">
						<h5  ng-show="preLiquidacion.verDetalle">Total: U$S {{ preLiquidacion.detalle.total | currency }}</h5>
					</div>
					<div class="col-lg-4 text-right">
						<button class="btn btn-primary" ng-click="preLiquidar()">Generar pre-liquidación</button>
					</div>
				</div>
				<hr>
				<accordion-min heading="Comprobantes - Pre-Liquidación número: {{ preLiquidacion.selected.preNumber }}" ng-show="preLiquidacion.verDetalle">
					<vista-comprobantes model="comprobantesPreLiquidados.model" datos-invoices="comprobantesPreLiquidados.comprobantes" ocultar-filtros="comprobantesPreLiquidados.ocultarFiltros" total-items="comprobantesPreLiquidados.total" control-codigos="false" loading-state="comprobantesPreLiquidados.cargando" mostrar-ptos-venta="false" ocultar-accordion-invoices-search="true" ocultar-accordion-comprobantes-vistos="true" panel-mensaje="mensajeResultado" volver-a-principal="volverAPrincipal"></vista-comprobantes>
				</accordion-min>
				<div class="col-lg-12 text-right">
					<button class="btn btn-danger" ng-click="eliminarPreLiquidacion()" ng-disabled="!preLiquidacion.verDetalle">Eliminar</button>
					<button class="btn btn-primary" ng-click="liquidar()" ng-disabled="!preLiquidacion.verDetalle">Liquidar</button>
				</div>
			</div>

		</tab>

		<tab class="hidden-print" heading="Pre-Liquidaciones" select="cambiarModo('sinLiquidar')">
			<div class="col-xlg-offset-2 col-xlg-8">
				<div>
					<h3>Pre-Liquidaciones</h3>
				</div>
				<hr>
				<liquidaciones-search model="preLiquidacion.model" ocultar-filtros="preLiquidacion.ocultarFiltros"></liquidaciones-search>
				<table-pagos cargando="preLiquidacion.cargando" datos-pagos="preLiquidacion.datos" panel-mensaje="preLiquidacion.panelMensaje" detalle="cargarDetallePreLiquidacion(pago)" final="false"></table-pagos>
				<!--<div-pagination total-items="totalLiquidaciones" items-per-page="itemsPerPage" current-page="currentPageLiquidaciones"></div-pagination>-->
				<div class="col-lg-12 hidden-print" ng-show="preLiquidacion.total > itemsPerPage">
					<div class="text-center visible-xs"><pagination boundary-links="true" total-items="preLiquidacion.total" items-per-page="itemsPerPage" ng-model="preLiquidacion.currentPage" max-size="5" ng-click="cargarPreLiquidaciones()" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div>
					<div class="text-center visible-sm"><pagination boundary-links="true" total-items="preLiquidacion.total" items-per-page="itemsPerPage" ng-model="preLiquidacion.currentPage" max-size="7" ng-click="cargarPreLiquidaciones()" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div>
					<div class="text-center visible-md"><pagination boundary-links="true" total-items="preLiquidacion.total" items-per-page="itemsPerPage" ng-model="preLiquidacion.currentPage" max-size="11" ng-click="cargarPreLiquidaciones()" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div>
					<div class="text-center visible-lg"><pagination boundary-links="true" total-items="preLiquidacion.total" items-per-page="itemsPerPage" ng-model="preLiquidacion.currentPage" max-size="15" ng-click="cargarPreLiquidaciones()" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div>
				</div>
				<div class="row">
					<div class="col-lg-4">
						<h5  ng-show="preLiquidacion.verDetalle">Toneladas: {{ preLiquidacion.detalle.tons | number: 2 }}</h5>
					</div>
					<div class="col-lg-4">
						<h5  ng-show="preLiquidacion.verDetalle">Total: U$S {{ preLiquidacion.detalle.total | currency }}</h5>
					</div>
					<div class="col-lg-4 text-right">
						<br>
						<button class="btn btn-danger" ng-click="eliminarPreLiquidacion()" ng-disabled="!preLiquidacion.verDetalle">Eliminar</button>
						<button class="btn btn-primary" ng-click="liquidar()" ng-disabled="!preLiquidacion.verDetalle">Liquidar</button>
					</div>
				</div>
			</div>
		</tab>

		<tab class="hidden-print" heading="Liquidaciones" select="cambiarModo('liquidacion')">
			<div class="col-xlg-offset-2 col-xlg-8">
				<div>
					<h3>Liquidaciones</h3>
				</div>
				<hr>
				<liquidaciones-search model="liquidacion.model" ocultar-filtros="liquidacion.ocultarFiltros"></liquidaciones-search>
				<table-pagos cargando="liquidacion.cargando" datos-pagos="liquidacion.datos" panel-mensaje="liquidacion.panelMensaje" detalle="detalleLiquidacion(pago)" final="true"></table-pagos>
				<div class="col-lg-12 hidden-print" ng-show="liquidacion.total > itemsPerPage">
					<div class="text-center visible-xs"><pagination boundary-links="true" total-items="liquidacion.total" items-per-page="itemsPerPage" ng-model="liquidacion.currentPage" max-size="5" ng-click="cargarLiquidaciones()" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div>
					<div class="text-center visible-sm"><pagination boundary-links="true" total-items="liquidacion.total" items-per-page="itemsPerPage" ng-model="liquidacion.currentPage" max-size="7" ng-click="cargarLiquidaciones()" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div>
					<div class="text-center visible-md"><pagination boundary-links="true" total-items="liquidacion.total" items-per-page="itemsPerPage" ng-model="liquidacion.currentPage" max-size="11" ng-click="cargarLiquidaciones()" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div>
					<div class="text-center visible-lg"><pagination boundary-links="true" total-items="liquidacion.total" items-per-page="itemsPerPage" ng-model="liquidacion.currentPage" max-size="15" ng-click="cargarLiquidaciones()" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div>
				</div>
				<accordion-min heading="Comprobantes - Liquidación número: {{ liquidacion.selected.number }}" ng-show="liquidacion.verDetalle">
					<vista-comprobantes class="col-lg-12 center-block" model="comprobantesLiquidados.model" datos-invoices="comprobantesLiquidados.comprobantes" ocultar-filtros="comprobantesLiquidados.ocultarFiltros" total-items="comprobantesLiquidados.total" control-codigos="false" loading-state="comprobantesLiquidados.cargando" mostrar-ptos-venta="false" ocultar-accordion-invoices-search="true" ocultar-accordion-comprobantes-vistos="true" panel-mensaje="mensajeResultado" volver-a-principal="volverAPrincipal"></vista-comprobantes>
				</accordion-min>
			</div>
		</tab>

	</tabset>

</div>