<div class="container" ng-controller="matchPricesCtrl">

	<div ng-hide="listaMatch">

		<br>
		<div class="row">
			<div class="col-lg-6">
				<div class="xpage-header">
					<h1 ng-show="acceso=='terminal'">Tarifario - {{ terminal.full_name }}</h1>
					<h1 ng-show="acceso=='agp'">Tarifario</h1>
				</div>
			</div>
			<div class="col-lg-6">
				<div class="panel panel-default">
					<div class="panel-heading"><strong>Buscar Tarifa por</strong></div>
					<div class="panel-body">
						<input type="text" ng-model="search" class="form-control" placeholder="Código, descripción o código asociado" toupper>
					</div>
				</div>
			</div>
		</div>

		<div class="row" ng-hide="flagGuardado">
			<div class="col-lg-6">
				<div class="alert alert-dismissable alert-success">
					<button type="button" class="close" ng-click="esconderAlerta()">×</button>
					<strong>Éxito</strong> - Se han guardado los códigos de la página anterior.
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-lg-12">
				<div class="bs-example table-responsive">
					<table class="table table-bordered table-hover">
						<thead>
						<tr>
							<th>Código</th>
							<th>Tarifa</th>
							<th>Cod. Asociado</th>
							<th ng-show="acceso=='terminal'">Cargar</th>
						</tr>
						</thead>
						<tbody>
						<!--<tr style="height:60px" ng-repeat="price in filteredPrices" class="{{ price.matches[0].claseFila }}">-->
						<tr style="height:60px" ng-repeat="price in filteredPrices = (pricelist | startFrom:(currentPage-1)*itemsPerPage | limitTo:itemsPerPage | filter:search)" class="{{ price.matches[0].claseFila }}">
							<td class="col-lg-1">{{ price.code }}</td>
							<td class="col-lg-7">{{ price.description | maxLength : 190 }}<a href="" ng-show="(price.description.length > 190)" popover="{{ price.description }}" popover-trigger="mouseenter"> (...)</a></td>
							<td class="col-lg-2">
								<span ng-repeat="codigo in price.matches[0].match track by $index" ng-show="acceso=='terminal'">
									<a title="Eliminar" href ng-click="borrar(price, codigo)">{{ codigo }}</a>
									<span ng-show="!$last">, </span>
								</span>
								<span ng-repeat="codigo in price.matches[0].match track by $index" ng-show="acceso=='agp'">
									<a title="Eliminar" href ng-click="borrar(price, codigo)">{{ codigo }}</a>
									<span ng-show="!$last">, </span>
								</span>
							</td>
							<td class="col-lg-2" ng-show="acceso=='terminal'">
								<div class="input-group">
									<input type="text" class="form-control" ng-model="price.new" ng-keyup="hitEnter($event, price)" toupper>
									<span class="input-group-btn">
										<button type="button" class="btn btn-primary" ng-click="agregarCodigo(price, $index)" ng-init="price.disabled = true" ng-disabled="price.disabled"><span class="glyphicon glyphicon-plus"></span></button>
									</span>
								</div>
							</td>
						</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>

		<pagination boundary-links="true" total-items="totalItems" ng-model="currentPage" ng-change="pageChanged()" max-size="5" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>

		<div class="row" ng-show="acceso=='terminal'">
			<div class="col-lg-12">
				<button class="btn btn-primary" ng-click="guardar()"><span class="glyphicon glyphicon-floppy-disk"></span> Guardar</button>
				<button class="btn" ng-click="abrirNuevoConcepto()"><span class="glyphicon glyphicon-asterisk"></span> Nuevo concepto</button>
			</div>
		</div>

	</div>

	<div ng-hide="nuevoConcepto">

		<div class="row">
			<div class="col-lg-12">
				<div class="xpage-header">
					<h1 id="nuevo">Otras tarifas</h1>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-lg-6">
				<div class="well">
					<form ng-submit="guardarNuevoConcepto()" class="bs-example form-horizontal" name="cargaNuevoConcepto">
						<fieldset>
							<legend>Tarifa</legend>
							<div class="form-group">
								<label for="inputCodigo" class="col-lg-2 control-label">Código</label>
								<div class="col-lg-10">
									<input type="text" class="form-control" ng-model="codigo" id="inputCodigo" placeholder="Ingresar código" ng-required="esRequerido" toupper>
								</div>
							</div>
							<div class="form-group">
								<label for="inputDescri" class="col-lg-2 control-label">Descripción</label>
								<div class="col-lg-10">
									<input type="text" class="form-control" ng-model="descripcion" id="inputDescri" placeholder="Ingresar descripcion" ng-required="esRequerido">
								</div>
							</div>
							<div class="form-group">
								<label for="inputUnidad" class="col-lg-2 control-label">Unidad</label>
								<div class="col-lg-10">
									<select class="form-control" id="inputUnidad" ng-model="unidad" ng-required="esRequerido">
										<option value="CONTAINER" ng-selected="true">Contenedor</option>
										<option value="TN">tn</option>
										<option value="BOX">cajón</option>
									</select>
								</div>
							</div>
							<div class="form-group">
								<label for="inputMoneda" class="col-lg-2 control-label">Moneda</label>
								<div class="col-lg-10">
									<select class="form-control" id="inputMoneda" ng-model="moneda" ng-required="esRequerido">
										<option value="DOL">U$S</option>
										<option value="PES" ng-selected="true">$ARG</option>
									</select>
								</div>
							</div>
							<div class="form-group">
								<label for="inputPrecio" class="col-lg-2 control-label">Precio</label>
								<div class="col-lg-10">
									<input type="text" class="form-control" ng-model="precio" id="inputPrecio" placeholder="Ingresar precio" ng-required="esRequerido">
								</div>
							</div>
							<div class="form-group">
								<div class="col-lg-10 col-lg-offset-2">
									<button class="btn btn-default" ng-click="salir()">Cancelar</button>
									<button type="submit" class="btn btn-primary">Agregar</button>
								</div>
							</div>
						</fieldset>
					</form>
				</div>
			</div>
		</div>

	</div>
</div>
<br>