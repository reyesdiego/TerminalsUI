<div class="container agp">

	<div class="row">
		<div class="col-lg-12">
			<h1><img src="images/reportes.png" height="64" width="64" class="hidden-xs">Reportes</h1>
		</div>
	</div>

	<div class="row">
		<tabset>
			<tab heading="Totales por tarifa" ng-controller="reporteTarifasCtrl">
				<br>
				<div class="col-lg-12" ng-show="loadingReporteTarifas">
					<img class="media-object col-lg-offset-5" src="images/ajax_loader_gray_512.gif" width="252" height="252">
				</div>

				<div ng-show="errorTarifario">
					<div-panel config-panel="configPanel">
						<span>{{ configPanel.mensaje }}</span>
					</div-panel>
				</div>

				<div class="col-lg-12 well" ng-hide="mostrarGrafico || loadingReporteTarifas || errorTarifario">
					<div class="row">
						<div class="col-lg-6">
							<label for="fechaDesde">Desde</label>
							<p class="input-group">
								<input type="text" id="fechaDesde" readonly="true" class="form-control" datepicker-popup="{{format}}" ng-model="desde" />
								<span class="input-group-btn">
									<button class="btn btn-default" ng-click="isCollapsedDesde = !isCollapsedDesde"><i class="glyphicon glyphicon-calendar"></i></button>
								</span>
							</p>
							<div collapse="isCollapsedDesde">
								<div>
									<datepicker ng-model="desde" show-weeks="false" ng-change="isCollapsedDesde = !isCollapsedDesde" max-date="maxDate"></datepicker>
								</div>
							</div>
						</div>
						<div class="col-lg-6">
							<label for="fechaHasta">Hasta</label>
							<p class="input-group">
								<input type="text" id="fechaHasta" readonly="true" class="form-control" datepicker-popup="{{format}}" ng-model="hasta" />
								<span class="input-group-btn">
									<button class="btn btn-default" ng-click="isCollapsedHasta = !isCollapsedHasta"><i class="glyphicon glyphicon-calendar"></i></button>
								</span>
							</p>
							<div collapse="isCollapsedHasta">
								<div>
									<datepicker ng-model="hasta" show-weeks="false" ng-change="isCollapsedHasta = !isCollapsedHasta" max-date="maxDate"></datepicker>
								</div>
							</div>
						</div>
					</div>
				</div>

				<div class="row" ng-hide="mostrarGrafico || loadingReporteTarifas || errorTarifario">
					<div class="col-lg-12">
						<div class="input-group">
							<input type="text" class="form-control" ng-model="search" placeholder="Buscar por código, descripción o tarifa" toupper>
							<span class="input-group-btn"><button class="btn btn-default" ng-click="search = ''"><span class="glyphicon glyphicon-remove-circle"></span></button></span>
						</div>
						<div class="checkbox">
							<label>
								<input type="checkbox" ng-model="tasas" ng-change="recargarPricelist()">Sólo tasa a las cargas
							</label>
						</div>
					</div>
				</div>

				<div class="row" ng-hide="mostrarGrafico || loadingReporteTarifas || errorTarifario">
					<div class="col-lg-12">
						<div class="bs-example table-responsive">
							<table class="table table-striped table-bordered table-hover">
								<thead>
								<tr>
									<th><span class="glyphicon glyphicon-bookmark"></span> Código</th>
									<th><span class="glyphicon glyphicon-credit-card"></span> Tarifa</th>
									<th class="text-center"><span class="glyphicon glyphicon-check"></span> Seleccionar</th>
								</tr>
								</thead>
								<tbody>
								<tr style="height:60px" ng-repeat="price in filteredPrices = (pricelist | startFrom:(currentPage-1)*itemsPerPage | limitTo:itemsPerPage | filter:search)">
									<td class="col-lg-1">{{ price.code }}</td>
									<td class="col-lg-8">{{ price.description | maxLength : 240 }}<a href="" ng-show="(price.description.length > 240)" popover="{{ price.description }}" popover-trigger="mouseenter"> (...)</a></td>
									<td class="col-lg-2 text-center"><input style="width: 24px; height: 24px;" type="checkbox" ng-model="price.graficar"></td>
								</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>

				<div class="row" ng-hide="mostrarGrafico || loadingReporteTarifas || errorTarifario">
					<div class="col-lg-10 hidden-xs"><pagination boundary-links="true" total-items="totalItems" ng-model="currentPage" ng-change="pageChanged()" max-size="20" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div>
					<div class="col-lg-10 visible-xs"><pagination boundary-links="true" total-items="totalItems" ng-model="currentPage" ng-change="pageChanged()" max-size="5" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div>
					<div class=" col-lg-2 text-right" style="margin-top: 20px">
						<button class="btn btn-primary" ng-click="armarGraficoTarifas()"><span class="glyphicon glyphicon-asterisk"></span> Cargar gráfico</button>
					</div>
				</div>

				<div class="row" ng-show="mostrarGrafico && !loadingReporteTarifas && !errorTarifario">
					<h3>Del {{ desde | date: 'dd/MM/yyyy' }} al {{ hasta | date: 'dd/MM/yyyy' }}</h3>
				</div>

				<div class="row" ng-show="mostrarGrafico && !loadingReporteTarifas && !errorTarifario">
					<div class="col-lg-12">
						<table class="table table-striped table-bordered table-hover">
							<thead>
							<tr>
								<th class="col-lg-1"></th>
								<th class="col-lg-3 text-center" ng-repeat="terminal in tablaGrafico.terminales"><span class="glyphicon glyphicon-credit-card"></span> {{ terminal }}</th>
								<th class="col-lg-2 text-center"><span class="glyphicon glyphicon-plus-sign"></span> Total</th>
							</tr>
							</thead>
							<tbody>
							<tr ng-repeat="tarifa in tablaGrafico.data">
								<td class="text-center"><strong>{{ tarifa.code }}</strong></td>
								<td ng-repeat="cantidad in tarifa.conteo track by $index" class="text-center"><span ng-show="!$last">U$S {{ cantidad | number:2 }} </span><span ng-show="!$last">({{ tarifa.porcentaje[$index] | number:2 }} %)</span><strong ng-show="$last">U$S {{ cantidad | number:2 }}</strong></td>
							</tr>
							</tbody>
						</table>
					</div>
				</div>

				<div class="row" ng-show="mostrarGrafico && !errorTarifario">
					<div class="col-lg-12 text-center">
						<dynamic-chart
								data="chartDataReporteTarifas"
								title="{{chartTitleReporteTarifas}}"
								width="{{chartWidthReporteTarifas}}"
								height="{{chartHeightReporteTarifas}}"
								select="selectRow(selectedRowIndexReporteTarifas)"
								type="{{columnChart}}"
								currency="true"
								stacked="false"
								is3-d="false"
								money="monedaFija"
								columns="{{ tarifasElegidas }}">
						</dynamic-chart>

					</div>
				</div>

				<div class="row" ng-show="mostrarGrafico && !errorTarifario">
					<div>
						<button class="btn btn-primary" ng-click="mostrarGrafico = false"><span class="glyphicon glyphicon-arrow-left"></span> Volver</button>
					</div>
				</div>
				<br>
			</tab>
			<!--<tab heading="Tarifas más utilizadas" select="cargarReporteTarifas()" ng-hide="true">
				<div class="row well">
					<div class="row col-lg-12" style="text-align: center"><h1>BACTSSA</h1></div>
					<div class="row">
						<div class="col-lg-6">
							<br>
							<table class="table table-bordered table-hover table-responsive">
								<thead class="bg-info">
								<th>Código</th>
								<th>Descripción</th>
								<th>Cantidad</th>
								</thead>
								<tbody>
								<tr ng-repeat="codigo in resultadosTarifasBactssa | orderBy: codigo[2]">
									<td>{{ codigo[0] }}</td>
									<td>{{ codigo[1] }}</td>
									<td>{{ codigo[2] }}</td>
								</tr>
								</tbody>
							</table>
						</div>
						<div class="col-lg-6">
							<dynamic-chart
									data="chartDataTarifasBactssa"
									title="{{chartTitleTortaHorarios}}"
									width="{{chartWidthTortaHorarios}}"
									height="{{chartHeightTortaHorarios}}"
									select="selectRow(selectedRowIndexTarifasBactssa)"
									type="{{pieChart}}"
									currency="false"
									stacked="false"
									is3-d="true">
							</dynamic-chart>
						</div>
					</div>
				</div>
				<hr>
				<div class="row well">
					<div class="row col-lg-12" style="text-align: center"><h1>TERMINAL 4</h1></div>
					<div class="row">
						<div class="col-lg-6">
							<br>
							<table class="table table-bordered table-hover table-responsive">
								<thead class="bg-info">
								<th>Código</th>
								<th>Descripción</th>
								<th>Cantidad</th>
								</thead>
								<tbody>
								<tr ng-repeat="codigo in resultadosTarifasTerminal4 | orderBy: codigo[2]">
									<td>{{ codigo[0] }}</td>
									<td>{{ codigo[1] }}</td>
									<td>{{ codigo[2] }}</td>
								</tr>
								</tbody>
							</table>
						</div>
						<div class="col-lg-6">
							<dynamic-chart
									data="chartDataTarifasTerminal4"
									title="{{chartTitleTortaHorarios}}"
									width="{{chartWidthTortaHorarios}}"
									height="{{chartHeightTortaHorarios}}"
									select="selectRow(selectedRowIndexTarifasTerminal4)"
									type="{{pieChart}}"
									currency="false"
									stacked="false"
									is3-d="true">
							</dynamic-chart>
						</div>
					</div>
				</div>
				<div class="row well">
					<div class="row col-lg-12" style="text-align: center"><h1>Terminal Río de la Plata</h1></div>
					<div class="row">
						<div class="col-lg-6">
							<br>
							<table class="table table-bordered table-hover table-responsive">
								<thead class="bg-info">
								<th>Código</th>
								<th>Descripción</th>
								<th>Cantidad</th>
								</thead>
								<tbody>
								<tr ng-repeat="codigo in resultadosTarifasTrp | orderBy: codigo[2]">
									<td>{{ codigo[0] }}</td>
									<td>{{ codigo[1] }}</td>
									<td>{{ codigo[2] }}</td>
								</tr>
								</tbody>
							</table>
						</div>
						<div class="col-lg-6">
							<dynamic-chart
									data="chartDataTarifasTrp"
									title="{{chartTitleTortaHorarios}}"
									width="{{chartWidthTortaHorarios}}"
									height="{{chartHeightTortaHorarios}}"
									select="selectRow(selectedRowIndexTarifasTrp)"
									type="{{pieChart}}"
									currency="false"
									stacked="false"
									is3-d="true">
							</dynamic-chart>
						</div>
					</div>
				</div>
			</tab>-->
			<!--<tab heading="Porcentaje de cumplimientos de horarios" ng-controller="reporteHorariosCtrl">
				<br>
				<div class="row" data-ng-show="$state.includes('gates')" data-ng-hide="$state.includes('gates.invoices')">
					<accordion-gates-turnos-search model="model" filtrar="filtrar(filtro, contenido)"></accordion-gates-turnos-search>
				</div>
				<br>
				<div class="col-lg-12" ng-show="!loadingReportGates && datosReporteGates.gatesTotal == 0">
					<div class="panel panel-info">
						<div class="panel-heading">
							<h3 class="panel-title">Reporte de cumplimiento de turnos</h3>
						</div>
						<div class="panel-body">
							<span>No se encontraron gates para los filtros seleccionados.</span>
						</div>
					</div>
				</div>
				<div class="col-lg-12" ng-show="loadingReportGates">
					<img class="media-object col-lg-offset-5" src="images/ajax_loader_gray_512.gif" width="252" height="252">
				</div>
				<div class="row well" ng-hide="loadingReportGates || datosReporteGates.gatesTotal == 0">
					<div class="row col-lg-12" style="text-align: center"><h1>{{ loginService.getFiltro() }}</h1></div>
					<div class="col-lg-6">
						<br>
						<div class="row">
							<table class="table table-bordered table-hover table-responsive">
								<thead class="bg-info">
								<th colspan="2" style="width: 50%; text-align: center">Turnos</th>
								<th colspan="2" style="width: 50%; text-align: center">Turnos incumplidos</th>
								</thead>
								<thead class="bg-success">
								<th style="width: 25%">Totales</th>
								<th style="width: 25%">En horario</th>
								<th style="width: 25%">Antes de horario</th>
								<th style="width: 25%">Tardes</th>
								</thead>
								<tr>
									<td>{{ datosReporteGates.gatesTotal }}</td>
									<td>{{ datosReporteGates.gatesOk }}</td>
									<td>{{ datosReporteGates.gatesEarly }}</td>
									<td>{{ datosReporteGates.gatesLate }}</td>
								</tr>
							</table>
						</div>
						<div class="row">
							<dynamic-chart
									data="chartDataBarras"
									title="{{chartTitleBarrasHorarios}}"
									width="{{chartWidthBarrasHorarios}}"
									height="{{chartHeightBarrasHorarios}}"
									select="selectRow(selectedRowIndexBarras)"
									type="{{columnChart}}"
									currency="false"
									stacked="false"
									is3-d="false">
							</dynamic-chart>
						</div>
					</div>
					<div class="col-lg-6">
						<dynamic-chart
								data="chartDataTorta"
								title="{{chartTitleTortaHorarios}}"
								width="{{chartWidthTortaHorarios}}"
								height="{{chartHeightTortaHorarios}}"
								select="selectRow(selectedRowIndexTorta)"
								type="{{pieChart}}"
								stacked="false"
								currency="false"
								is3-d="true">
						</dynamic-chart>
					</div>
				</div>
			</tab>-->
		</tabset>
	</div>

</div>