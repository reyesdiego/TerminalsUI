<div class="container agp">

	<div class="row">
		<div class="col-lg-12">
			<div class="xpage-header">
				<h1><img src="images/reportes.png"height="64" width="86">Reportes</h1>
			</div>
		</div>
	</div>

	<div class="row">
		<tabset>
			<tab heading="Reporte de códigos">
				<br>
				<div class="col-lg-12 well" ng-hide="$parent.mostrarGrafico">
					<div class="row">
						<div class="col-lg-6">
							<label for="fechaDesde">Desde</label>
							<p class="input-group">
								<input type="text" id="fechaDesde" readonly="true" class="form-control" datepicker-popup="{{format}}" ng-model="$parent.desde" />
								<span class="input-group-btn">
									<button class="btn btn-default" ng-click="isCollapsedDesde = !isCollapsedDesde"><i class="glyphicon glyphicon-calendar"></i></button>
								</span>
							</p>
							<div collapse="isCollapsedDesde">
								<div>
									<datepicker ng-model="$parent.desde" show-weeks="false" ng-change="isCollapsedDesde = !isCollapsedDesde"></datepicker>
								</div>
							</div>
						</div>
						<div class="col-lg-6">
							<label for="fechaHasta">Hasta</label>
							<p class="input-group">
								<input type="text" id="fechaHasta" readonly="true" class="form-control" datepicker-popup="{{format}}" ng-model="$parent.hasta" />
								<span class="input-group-btn">
									<button class="btn btn-default" ng-click="isCollapsedHasta = !isCollapsedHasta"><i class="glyphicon glyphicon-calendar"></i></button>
								</span>
							</p>
							<div collapse="isCollapsedHasta">
								<div>
									<datepicker ng-model="$parent.hasta" show-weeks="false" ng-change="isCollapsedHasta = !isCollapsedHasta"></datepicker>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="row" ng-hide="$parent.mostrarGrafico">
					<div class="col-lg-12">
						<div class="bs-example table-responsive">
							<table class="table table-striped table-bordered table-hover">
								<thead>
								<tr>
									<th><span class="glyphicon glyphicon-bookmark"></span> Código</th>
									<th><span class="glyphicon glyphicon-credit-card"></span> Tarifa</th>
									<th class="text-center"><span class="glyphicon glyphicon-check"></span> Seleccionar</th>
								</tr>
								</thead>
								<tbody>
								<tr style="height:60px" ng-repeat="price in filteredPrices">
									<td class="col-lg-1">{{ price.code }}</td>
									<td class="col-lg-8">{{ price.description | maxLength : 240 }}<a href="" ng-show="(price.description.length > 240)" popover="{{ price.description }}" popover-trigger="mouseenter"> (...)</a></td>
									<td class="col-lg-2 text-center"><input style="width: 24px; height: 24px;" type="checkbox" ng-model="price.graficar"></td>
								</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>

				<div class="row" ng-hide="$parent.mostrarGrafico">
					<div class="col-lg-10"><pagination boundary-links="true" total-items="totalItems" ng-model="$parent.currentPage" ng-change="pageChanged()" max-size="20" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div>
					<div class=" col-lg-2 text-right" style="margin-top: 20px">
						<button class="btn btn-primary" ng-click="armarGraficoTarifas()"><span class="glyphicon glyphicon-asterisk"></span> Cargar gráfico</button>
					</div>
				</div>

				<div class="row" ng-show="$parent.mostrarGrafico">
					<div class="col-lg-12">
						<table class="table table-striped table-bordered table-hover">
							<thead>
							<tr>
								<th class="col-lg-1"></th>
								<th class="col-lg-3 text-center" ng-repeat="terminal in tablaGrafico.terminales"><span class="glyphicon glyphicon-credit-card"></span> {{ terminal }}</th>
								<th class="col-lg-2 text-center"><span class="glyphicon glyphicon-plus-sign"></span> Total</th>
							</tr>
							</thead>
							<tbody>
							<tr ng-repeat="tarifa in tablaGrafico.data">
								<td class="text-center">{{ tarifa.code }}</td>
								<td ng-repeat="cantidad in tarifa.conteo track by $index" class="text-center">{{ cantidad }} <span ng-show="!$last">({{ tarifa.porcentaje[$index] }} %)</span></td>
							</tr>
							</tbody>
						</table>
					</div>
				</div>

				<div class="row" ng-show="$parent.mostrarGrafico">
					<div class="col-lg-12 text-center">
						<dynamic-chart
								data="chartDataReporteTarifas"
								title="{{chartTitleReporteTarifas}}"
								width="{{chartWidthReporteTarifas}}"
								height="{{chartHeightReporteTarifas}}"
								select="selectRow(selectedRowIndexReporteTarifas)"
								type="{{columnChart}}"
								currency="false"
								stacked="false"
								is3-d="false">
						</dynamic-chart>
					</div>
				</div>

				<div class="row" ng-show="$parent.mostrarGrafico">
					<div>
						<button class="btn btn-primary" ng-click="$parent.mostrarGrafico = false"><span class="glyphicon glyphicon-arrow-left"></span> Volver</button>
					</div>
				</div>
				<br>
			</tab>
			<tab heading="Tarifas más utilizadas" select="cargarReporteTarifas()">
				<div class="row well">
					<div class="row col-lg-12" style="text-align: center"><h1>BACTSSA</h1></div>
					<div class="row">
						<div class="col-lg-6">
							<br>
							<table class="table table-bordered table-hover table-responsive">
								<thead class="bg-info">
								<th>Código</th>
								<th>Descripción</th>
								<th>Cantidad</th>
								</thead>
								<tbody>
								<tr ng-repeat="codigo in resultadosTarifasBactssa | orderBy: codigo[2]">
									<td>{{ codigo[0] }}</td>
									<td>{{ codigo[1] }}</td>
									<td>{{ codigo[2] }}</td>
								</tr>
								</tbody>
							</table>
						</div>
						<div class="col-lg-6">
							<dynamic-chart
									data="chartDataTarifasBactssa"
									title="{{chartTitleTortaHorarios}}"
									width="{{chartWidthTortaHorarios}}"
									height="{{chartHeightTortaHorarios}}"
									select="selectRow(selectedRowIndexTarifasBactssa)"
									type="{{pieChart}}"
									currency="false"
									stacked="false"
									is3-d="true">
							</dynamic-chart>
						</div>
					</div>
				</div>
				<hr>
				<div class="row well">
					<div class="row col-lg-12" style="text-align: center"><h1>TERMINAL 4</h1></div>
					<div class="row">
						<div class="col-lg-6">
							<br>
							<table class="table table-bordered table-hover table-responsive">
								<thead class="bg-info">
								<th>Código</th>
								<th>Descripción</th>
								<th>Cantidad</th>
								</thead>
								<tbody>
								<tr ng-repeat="codigo in resultadosTarifasTerminal4 | orderBy: codigo[2]">
									<td>{{ codigo[0] }}</td>
									<td>{{ codigo[1] }}</td>
									<td>{{ codigo[2] }}</td>
								</tr>
								</tbody>
							</table>
						</div>
						<div class="col-lg-6">
							<dynamic-chart
									data="chartDataTarifasTerminal4"
									title="{{chartTitleTortaHorarios}}"
									width="{{chartWidthTortaHorarios}}"
									height="{{chartHeightTortaHorarios}}"
									select="selectRow(selectedRowIndexTarifasTerminal4)"
									type="{{pieChart}}"
									currency="false"
									stacked="false"
									is3-d="true">
							</dynamic-chart>
						</div>
					</div>
				</div>
				<div class="row well">
					<div class="row col-lg-12" style="text-align: center"><h1>Terminal Río de la Plata</h1></div>
					<div class="row">
						<div class="col-lg-6">
							<br>
							<table class="table table-bordered table-hover table-responsive">
								<thead class="bg-info">
								<th>Código</th>
								<th>Descripción</th>
								<th>Cantidad</th>
								</thead>
								<tbody>
								<tr ng-repeat="codigo in resultadosTarifasTrp | orderBy: codigo[2]">
									<td>{{ codigo[0] }}</td>
									<td>{{ codigo[1] }}</td>
									<td>{{ codigo[2] }}</td>
								</tr>
								</tbody>
							</table>
						</div>
						<div class="col-lg-6">
							<dynamic-chart
									data="chartDataTarifasTrp"
									title="{{chartTitleTortaHorarios}}"
									width="{{chartWidthTortaHorarios}}"
									height="{{chartHeightTortaHorarios}}"
									select="selectRow(selectedRowIndexTarifasTrp)"
									type="{{pieChart}}"
									currency="false"
									stacked="false"
									is3-d="true">
							</dynamic-chart>
						</div>
					</div>
				</div>
			</tab>
			<tab heading="Porcentaje de cumplimientos de horarios" select="cargarReporteHorarios()">
				<div class="row well">
					<div class="row col-lg-12" style="text-align: center"><h1>BACTSSA</h1></div>
					<div class="col-lg-6">
						<br>
						<div class="row">
							<table class="table table-bordered table-hover table-responsive">
								<thead class="bg-info">
									<th colspan="2" style="width: 50%; text-align: center">Turnos totales</th>
									<th colspan="2" style="width: 50%; text-align: center">Turnos incumplidos</th>
								</thead>
								<thead class="bg-success">
									<th style="width: 25%">Programados</th>
									<th style="width: 25%">Sin programar</th>
									<th style="width: 25%">Ausencias</th>
									<th style="width: 25%">Tardes</th>
								</thead>
								<tr>
									<td>{{ chartDataTortaBactssa[0][1] + chartDataTortaBactssa[1][1] + chartDataTortaBactssa[2][1] }}</td>
									<td>{{ chartDataTortaBactssa[3][1] }}</td>
									<td>{{ chartDataTortaBactssa[1][1] }}</td>
									<td>{{ chartDataTortaBactssa[2][1] }}</td>
								</tr>
							</table>
						</div>
						<div class="row">
							<dynamic-chart
									data="chartDataBarrasBactssa"
									title="{{chartTitleBarrasHorarios}}"
									width="{{chartWidthBarrasHorarios}}"
									height="{{chartHeightBarrasHorarios}}"
									select="selectRow(selectedRowIndexBarrasBactssa)"
									type="{{columnChart}}"
									currency="false"
									stacked="false"
									is3-d="false">
							</dynamic-chart>
						</div>
					</div>
					<div class="col-lg-6">
						<dynamic-chart
								data="chartDataTortaBactssa"
								title="{{chartTitleTortaHorarios}}"
								width="{{chartWidthTortaHorarios}}"
								height="{{chartHeightTortaHorarios}}"
								select="selectRow(selectedRowIndexTortaBactssa)"
								type="{{pieChart}}"
								stacked="false"
								currency="false"
								is3-d="true">
						</dynamic-chart>
					</div>
				</div>
				<hr>
				<div class="row well">
					<div class="row col-lg-12" style="text-align: center"><h1>TERMINAL 4</h1></div>
					<div class="col-lg-6">
						<br>
						<div class=" row">
							<table class="table table-bordered table-hover table-responsive">
								<thead class="bg-info">
									<th colspan="2" style="width: 50%; text-align: center">Turnos totales</th>
									<th colspan="2" style="width: 50%; text-align: center">Turnos incumplidos</th>
								</thead>
								<thead class="bg-success">
									<th style="width: 25%">Programados</th>
									<th style="width: 25%">Sin programar</th>
									<th style="width: 25%">Ausencias</th>
									<th style="width: 25%">Tardes</th>
								</thead>
								<tr>
									<td>{{ chartDataTortaTerminal4[0][1] + chartDataTortaTerminal4[1][1] + chartDataTortaTerminal4[2][1] }}</td>
									<td>{{ chartDataTortaTerminal4[3][1] }}</td>
									<td>{{ chartDataTortaTerminal4[1][1] }}</td>
									<td>{{ chartDataTortaTerminal4[2][1] }}</td>
								</tr>
							</table>
						</div>
						<div class="row">
							<dynamic-chart
									data="chartDataBarrasTerminal4"
									title="{{chartTitleBarrasHorarios}}"
									width="{{chartWidthBarrasHorarios}}"
									height="{{chartHeightBarrasHorarios}}"
									select="selectRow(selectedRowIndexBarrasTerminal4)"
									type="{{columnChart}}"
									currency="false"
									stacked="false"
									is3-d="false">
							</dynamic-chart>
						</div>
					</div>
					<div class="col-lg-6">
						<dynamic-chart
								data="chartDataTortaTerminal4"
								title="{{chartTitleTortaHorarios}}"
								width="{{chartWidthTortaHorarios}}"
								height="{{chartHeightTortaHorarios}}"
								select="selectRow(selectedRowIndexTortaTerminal4)"
								type="{{pieChart}}"
								stacked="false"
								currency="false"
								is3-d="true">
						</dynamic-chart>
					</div>
				</div>
				<hr>
				<div class="row well">
					<div class="row col-lg-12" style="text-align: center"><h1>Terminal Río de la Plata</h1></div>
					<div class="col-lg-6">
						<br>
						<div class=" row">
							<table class="table table-bordered table-hover table-responsive">
								<thead class="bg-info">
									<th colspan="2" style="width: 50%; text-align: center">Turnos totales</th>
									<th colspan="2" style="width: 50%; text-align: center">Turnos incumplidos</th>
								</thead>
								<thead class="bg-success">
									<th style="width: 25%">Programados</th>
									<th style="width: 25%">Sin programar</th>
									<th style="width: 25%">Ausencias</th>
									<th style="width: 25%">Tardes</th>
								</thead>
								<tr>
									<td>{{ chartDataTortaTrp[0][1] + chartDataTortaTrp[1][1] + chartDataTortaTrp[2][1] }}</td>
									<td>{{ chartDataTortaTrp[3][1] }}</td>
									<td>{{ chartDataTortaTrp[1][1] }}</td>
									<td>{{ chartDataTortaTrp[2][1] }}</td>
								</tr>
							</table>
						</div>
						<div class="row">
							<dynamic-chart
									data="chartDataBarrasTrp"
									title="{{chartTitleBarrasHorarios}}"
									width="{{chartWidthBarrasHorarios}}"
									height="{{chartHeightBarrasHorarios}}"
									select="selectRow(selectedRowIndexBarrasTrp)"
									type="{{columnChart}}"
									currency="false"
									stacked="false"
									is3-d="false">
							</dynamic-chart>
						</div>
					</div>
					<div class="col-lg-6">
						<dynamic-chart
								data="chartDataTortaTrp"
								title="{{chartTitleTortaHorarios}}"
								width="{{chartWidthTortaHorarios}}"
								height="{{chartHeightTortaHorarios}}"
								select="selectRow(selectedRowIndexTortaTrp)"
								type="{{pieChart}}"
								stacked="false"
								currency="false"
								is3-d="true">
						</dynamic-chart>
					</div>
				</div>
			</tab>
		</tabset>
	</div>

</div>