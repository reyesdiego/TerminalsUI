<div class="container col-xlg-offset-2 col-xlg-8" ng-controller="usersCtrl">
	<div class="row col-lg-12 page-header">
		<h1><img ng-src="images/controlUsers.png" height="64" width="64" class="hidden-xs">Control de Usuarios</h1>
	</div>
	<div class=" row col-lg-12" ng-hide="permiso || cargando">
		<div-panel config-panel="panelMensaje">
			<p>{{ panelMensaje.mensaje}}</p>
		</div-panel>
	</div>
	<div-cargando mostrar="cargando">
		<div ng-show="permiso">
			<div class="col-lg-12">
				<div class="table-responsive">
					<table class="table table-bordered table-hover">
						<thead>
						<tr>
							<th>Nombre</th>
							<th>Usuario</th>
							<th>Mail</th>
							<th>Terminal</th>
							<th>Alta</th>
							<th>Token</th>
							<th>Última conexión</th>
                            <th>Online</th>
							<th class="text-center">Estado</th>
						</tr>
						</thead>
						<tbody style="font-size: 12px">
						<tr ng-repeat="dato in datosUsers" class="{{ dato.claseFila }}" ng-init="dato.guardar=false">
							<td>{{ dato.full_name }}</td>
							<td>{{ dato.user }}</td>
							<td>{{ dato.email }}</td>
							<td>{{ dato.terminal }}</td>
							<td>{{ dato.date_created | date: 'dd/MM/yy HH:mm' }}</td>
							<td>{{ dato.token.date_created | date: 'dd/MM/yy HH:mm' }}</td>
							<td class="{{ ultimaConexion(dato.lastLogin) }}"><strong>{{ dato.lastLogin | date: 'dd/MM/yy HH:mm'}}</strong></td>
                            <td class="text-center"><span class="glyphicon" ng-class="dato.online ? 'glyphicon-ok-circle usuarioActivo' : 'glyphicon-ban-circle usuarioInactivo'"></span> </td>
							<td class="text-center disabled"><input type="checkbox" ng-model="dato.status" ng-change="cambiaUsuario(dato)" ng-disabled="!estaDefinido(dato.token.date_created)"></td>
						</tr>
						</tbody>
					</table>
				</div>
			</div>
			<div class="row col-lg-12 text-right">
				<button-actualizar></button-actualizar>
				<button class="btn btn-primary" ng-click="guardar()" ng-disabled="disableButton()">Guardar</button>
			</div>
		</div>
	</div-cargando>
</div>